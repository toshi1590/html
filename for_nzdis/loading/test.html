<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

<style type="text/css">
  .hide {
    display: none;
  }
  .loading {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: rgba(0,0,0,.5);
    background-image: url('https://www.benricho.org/loading_images/img-transparent/359-88.gif');
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-position: center center;
    background-size: 150px 150px;
  }
</style>

<form method="post" accept-charset="utf-8">
  <div class="">
    <label>url</label>
    <input type="text" name="url" id="url">
  </div>
  <div class="">
    <label>column_numbers_to_scrape</label>
    <input type="number" name="column_numbers_to_scrape[]">
    <input type="number" name="column_numbers_to_scrape[]">
    <input type="number" name="column_numbers_to_scrape[]">
  </div>
  <button type="button" name="button" id="send_btn">send</button>
</form>
<div id="result"></div>
<div class="loading hide"></div>

<script type="text/javascript">
  $(function() {
    $('#send_btn').on('click', function(){
      $('#result').html('');
      var inputs = document.getElementsByTagName('input'); // this is inside because number of input tags chnages

      for (var i = 0; i < inputs.length; i++) {
        if (inputs[i].value == '') {
          alert('all inputs need to be filled in.'); // or specify the empty input
          break;
        } else {
          if (i == inputs.length - 1) {
            $.ajax({
              url: 'test.php',
              type: 'POST',
              data: $('form').serialize(),
              //リクエストが完了するまで実行される
              beforeSend: function(){
                $('.loading').removeClass('hide');
              }
            }).done(function(data){
              $('.loading').addClass('hide');
              $('#result').append('<p>url: ' + data + '</p>');
            }).fail(function(XMLHttpRequest, textStatus, errorThrown){
              $('#result').append('<p>failed</p>');
            });
          }
        }
      }
    });
  });
</script>
